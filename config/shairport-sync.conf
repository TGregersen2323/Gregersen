// Shairport-Sync configuration
// AirPlay -> ALSA Loopback (hw:Loopback,0,0)
//
// Fix: added allow_session_interruption + session_timeout for reliable Apple TV reconnects.
// Fix: audio_backend_buffer_desired_length_in_seconds set to 0.20 for stability.
// Fix: audio_backend_latency_offset_in_seconds set to -0.35 to compensate for
//      the ~350ms of downstream latency added by CamillaDSP + Snapcast buffering
//      (beyond Shairport's own buffer), keeping Apple TV AirPlay sync accurate.
// Fix: period_size = 1024 aligns ALSA loopback periods with CamillaDSP chunksize.

general =
{
    name = "Surround System";
    output_backend = "alsa";
    interpolation = "basic";
    ignore_volume_control = "no";
    mdns_backend = "avahi";
    allow_session_interruption = "yes";
    session_timeout = 20;
};

metadata =
{
    enabled = "yes";
    include_cover_art = "no";
    pipe_name = "/tmp/shairport-sync-metadata";
    pipe_timeout = 5000;
};

alsa =
{
    output_device = "hw:Loopback,0,0";
    period_size = 1024;
    audio_backend_latency_offset_in_seconds = -0.35;
    audio_backend_buffer_desired_length_in_seconds = 0.20;
};
