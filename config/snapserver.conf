# Snapserver configuration
# Stream source: named pipe from CamillaDSP
#
# Fix: chunk_ms set to 20 (not 10).
#      10ms chunks at 44100:16:2 = 441 samples/chunk means Snapcast processes
#      100 chunks/second, creating unnecessary CPU overhead and jitter. 20ms
#      halves the chunk rate while staying well within latency targets.
# Note: buffer=1000ms is intentionally kept â€” reducing it below ~500ms risks
#       dropouts on slow Wi-Fi clients; 1000ms gives reliable multi-room sync.

[http]
enabled = true
doc_root = /usr/share/snapserver/snapweb

[tcp]
enabled = true

[stream]
source = pipe:///tmp/snapfifo?name=CamillaStream&sampleformat=44100:16:2
buffer = 1000
codec = flac
chunk_ms = 20
